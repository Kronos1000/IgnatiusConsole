using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.Collections;

namespace QuizME
{
    public class Program
    {

        static void Main(string[] args)
        {
            // Main Menu 
            Console.WriteLine("Welcome To the Quiz Room");
            Console.WriteLine("Enter the Number of the task you want to perform");
            Console.WriteLine("1. Start Quiz");
            Console.WriteLine("2. Add Question");

            int  MenuChoice = int.Parse(Console.ReadLine());

            if(MenuChoice == 2) // add question method 
            {
                Console.WriteLine("Please Enter Question");
                string q = Console.ReadLine();
                Console.WriteLine("Enter question Subject");
                String qSubject = Console.ReadLine();
                Console.WriteLine("Enter Multiple Choice Option A ");
                String A = Console.ReadLine();
                Console.WriteLine("Enter Multiple Choice Option B");
                String B = Console.ReadLine();
                Console.WriteLine("Enter Multiple Choice Option C ");
                String C = Console.ReadLine();
                Console.WriteLine("Enter Letter  of Correct Answer ");
                String CorrectANS= Console.ReadLine();
              
                using (StreamWriter sw = File.AppendText("quiz.txt"))
                {
                    string QuestionToADD = (q + " | " + qSubject + " | " + A + " | " + B + " | " + C + " | " + CorrectANS);




                    sw.WriteLine(QuestionToADD);




                }

                // Main Menu 
                Console.WriteLine("Welcome To the Quiz Room");
                Console.WriteLine("Enter the Number of the task you want to perform");
                Console.WriteLine("1. Start Quiz");
                Console.WriteLine("2. Add Question");

               MenuChoice = int.Parse(Console.ReadLine());

            }

            

            if (MenuChoice == 1)
            {





                List<QuizQuestion> QuestionList = GetData();  // Take data from Second Method 
                double PlayerScore = 0; // Define Player Score counter Variable
                double QuestionCounter = 1; // Count have many questions to been shown to player

                QuizQuestion[] qArray = QuestionList.ToArray(); // Convet List to Array 

                // Generate Random Number to use later 
                Random RandQuestion = new Random();
                int R = RandQuestion.Next(0, qArray.Length);

                int quizLength = 3;


                // return question at array postion R 
                Console.WriteLine(qArray[R].Question);
                Console.WriteLine("   A: " + qArray[R].OptionONE);
                Console.WriteLine("   B: " + qArray[R].OptionTWO);
                Console.WriteLine("   C: " + qArray[R].OptionTHREE);
                string UserAnswer = Console.ReadLine();
                if (UserAnswer == qArray[R].CorrectAnswer)
                {
                    Console.WriteLine("Correct");
                    PlayerScore++; // Increase score if answer is Correct 
                    QuestionCounter++; // Increase Question Counter 
                }

                else
                {
                    Console.WriteLine("Sorry The Answer is Incorrect");
                    Console.WriteLine("The Correct Answer was: " + qArray[R].CorrectAnswer);
                    QuestionCounter++; // Increase Question Counter 
                }


                for (int i = 0; i < quizLength; i++)
                {
                    R = RandQuestion.Next(0, qArray.Length);








                    R = RandQuestion.Next(0, qArray.Length);
                    // return question at array postion R 
                    Console.WriteLine(qArray[R].Question);
                    Console.WriteLine("   A: " + qArray[R].OptionONE);
                    Console.WriteLine("   B: " + qArray[R].OptionTWO);
                    Console.WriteLine("   C: " + qArray[R].OptionTHREE);






                    UserAnswer = Console.ReadLine();




                    if (UserAnswer == qArray[R].CorrectAnswer)
                    {
                        Console.WriteLine("Correct");
                        PlayerScore++; // Increase score if answer is Correct 
                        QuestionCounter++; // Increase Question Counter 
                    }

                    else
                    {
                        Console.WriteLine("Sorry The Answer is Incorrect");
                        Console.WriteLine("The Correct Answer was: " + qArray[R].CorrectAnswer);
                        QuestionCounter++; // Increase Question Counter 
                    }

                    UserAnswer = Console.ReadLine();
                    R = RandQuestion.Next(0, qArray.Length);
                }


                // Display Player Score when # is entered 
                double percentage = PlayerScore / QuestionCounter * 100;
                Console.WriteLine("You have Answered " + PlayerScore + " out of  " + QuestionCounter + " Questions Correctly");
                Console.WriteLine("Overall Percentage: {0:0.00} Percent", percentage);

                Console.WriteLine("Please type exit to close program");
                Console.ReadLine();
            }

        }
        public static List<QuizQuestion> GetData()
        {
            List<QuizQuestion> QuestionList = new List<QuizQuestion>();


            using (StreamReader reader = new StreamReader("quiz.txt"))
            {
                while (!reader.EndOfStream)
                {
                    string line = reader.ReadLine();
                    string[] parts = line.Split('|');

                    string Question = parts[0];
                    string Subject = parts[1];
                    string A = parts[2];
                    string B = parts[3];
                    string C = parts[4];

                    string CorrectAnswer = parts[5];

                    QuizQuestion Q = new QuizQuestion(Question,Subject, A, B, C, CorrectAnswer);
                    QuestionList.Add(Q);


                }

                return QuestionList;





            }
        }
    }
}




























